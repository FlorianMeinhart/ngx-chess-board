!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/drag-drop"),require("@angular/common"),require("@angular/core"),require("rxjs"),require("lodash")):"function"==typeof define&&define.amd?define("ngx-chess-board",["exports","@angular/cdk/drag-drop","@angular/common","@angular/core","rxjs","lodash"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-chess-board"]={},e.ng.cdk.dragDrop,e.ng.common,e.ng.core,e.rxjs,e.lodash)}(this,(function(e,t,o,i,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function a(e,t){function o(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}Object.create;function c(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,r,n=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var d;Object.create;!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(d||(d={}));var l=function(e,t,o,i,r){this.checkPoints=[],this.color=t,this.constant=o,this.point=e,this.relValue=i,this.board=r},p=function(){function e(e,t){this.row=e,this.col=t}return e.prototype.isEqual=function(e){return e&&this.row===e.row&&this.col===e.col},e.prototype.hasCoordsEqual=function(e,t){return e&&t&&this.row===e&&this.col===t},e}(),u=function(e){function t(t,o,i,r){var n=e.call(this,t,o,i,5,r)||this;return n.isMovedAlready=!1,n}return a(t,e),t.prototype.getPossibleMoves=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t+1;i<8&&this.board.isFieldEmpty(i,o);++i)e.push(new p(i,o));for(i=t-1;i>=0&&this.board.isFieldEmpty(i,o);--i)e.push(new p(i,o));for(var r=o-1;r>=0&&this.board.isFieldEmpty(t,r);--r)e.push(new p(t,r));for(r=o+1;r<8&&this.board.isFieldEmpty(t,r);++r)e.push(new p(t,r));return e},t.prototype.getPossibleCaptures=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t+1;i<8;++i){if(this.board.isFieldTakenByEnemy(i,o,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(i=t-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(i,o,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(var r=o-1;r>=0;--r){if(this.board.isFieldTakenByEnemy(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(t,r));break}if(!this.board.isFieldEmpty(t,r))break}for(r=o+1;r<8;++r){if(this.board.isFieldTakenByEnemy(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(t,r));break}if(!this.board.isFieldEmpty(t,r))break}return e},t.prototype.getCoveredFields=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t+1;i<8;++i)if(this.board.isFieldEmpty(i,o))e.push(new p(i,o));else if(!(this.board.getPieceByField instanceof b)){e.push(new p(i,o));break}for(i=t-1;i>=0;--i)if(this.board.isFieldEmpty(i,o))e.push(new p(i,o));else if(!(this.board.getPieceByField instanceof b)){e.push(new p(i,o));break}for(var r=o-1;r>=0;--r)if(this.board.isFieldEmpty(t,r))e.push(new p(t,r));else if(!(this.board.getPieceByField instanceof b)){e.push(new p(t,r));break}for(r=o+1;r<8;++r)if(this.board.isFieldEmpty(t,r))e.push(new p(t,r));else if(!(this.board.getPieceByField instanceof b)){e.push(new p(t,r));break}return e},t}(l),b=function(e){function t(t,o,i,r){var n=e.call(this,t,o,i,0,r)||this;return n.castledAlready=!1,n.shortCastled=!1,n.longCastled=!1,n.isCastling=!1,n}return a(t,e),t.prototype.getPossibleMoves=function(){var e=[],t=this.point.row,o=this.point.col;if(this.board.isFieldEmpty(t,o-1)&&!this.board.isFieldUnderAttack(t,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t,o-1)),this.board.isFieldEmpty(t,o+1)&&!this.board.isFieldUnderAttack(t,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t,o+1)),this.board.isFieldEmpty(t+1,o)&&!this.board.isFieldUnderAttack(t+1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o)),this.board.isFieldEmpty(t-1,o)&&!this.board.isFieldUnderAttack(t-1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o)),this.board.isFieldEmpty(t-1,o-1)&&!this.board.isFieldUnderAttack(t-1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o-1)),this.board.isFieldEmpty(t-1,o+1)&&!this.board.isFieldUnderAttack(t-1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o+1)),this.board.isFieldEmpty(t+1,o-1)&&!this.board.isFieldUnderAttack(t+1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o-1)),this.board.isFieldEmpty(t+1,o+1)&&!this.board.isFieldUnderAttack(t+1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o+1)),!this.isMovedAlready){for(var i=!0,r=o-1;r>0;--r)if(!this.board.isFieldEmpty(t,r)||this.board.isFieldUnderAttack(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){i=!1;break}if(i&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(t,0)){var n=this.board.getPieceByField(t,0);n instanceof u&&(n.isMovedAlready||e.push(new p(t,o-2)))}var s=!0;for(r=o+1;r<7;++r)if(!this.board.isFieldEmpty(t,r)||this.board.isFieldUnderAttack(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){s=!1;break}if(s&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(t,7)){var a=this.board.getPieceByField(t,7);a instanceof u&&(a.isMovedAlready||e.push(new p(t,o+2)))}}return e},t.prototype.getPossibleCaptures=function(){var e=[],t=this.point.row,o=this.point.col;return this.board.isFieldTakenByEnemy(t,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t,o-1)),this.board.isFieldTakenByEnemy(t,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t,o+1)),this.board.isFieldTakenByEnemy(t+1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t+1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o)),this.board.isFieldTakenByEnemy(t-1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t-1,o,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o)),this.board.isFieldTakenByEnemy(t-1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t-1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o-1)),this.board.isFieldTakenByEnemy(t-1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t-1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o+1)),this.board.isFieldTakenByEnemy(t+1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t+1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o-1)),this.board.isFieldTakenByEnemy(t+1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&!this.board.isFieldUnderAttack(t+1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o+1)),e},t.prototype.getCoveredFields=function(){var e=[],t=this.point.row,o=this.point.col;return e.push(new p(t,o-1)),e.push(new p(t,o+1)),e.push(new p(t+1,o)),e.push(new p(t-1,o)),e.push(new p(t-1,o-1)),e.push(new p(t-1,o+1)),e.push(new p(t+1,o-1)),e.push(new p(t+1,o+1)),e},t}(l),f=function(e){function t(t,o,i,r){return e.call(this,t,o,i,3,r)||this}return a(t,e),t.prototype.getPossibleMoves=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t-1,r=o-1;i>=0&&r>=0&&this.board.isFieldEmpty(i,r);--i,--r)e.push(new p(i,r));for(i=t-1,r=o+1;i>=0&&r<8&&this.board.isFieldEmpty(i,r);--i,++r)e.push(new p(i,r));for(i=t+1,r=o-1;i<8&&r>=0&&this.board.isFieldEmpty(i,r);++i,--r)e.push(new p(i,r));for(i=t+1,r=o+1;i<8&&r<8&&this.board.isFieldEmpty(i,r);++i,++r)e.push(new p(i,r));return e},t.prototype.getPossibleCaptures=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t-1,r=o-1;i>=0&&r>=0;--i,--r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t-1,r=o+1;i>=0&&r<8;--i,++r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t+1,r=o-1;i<8&&r>=0;++i,--r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t+1,r=o+1;i<8&&r<8;++i,++r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}return e},t.prototype.getCoveredFields=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t-1,r=o-1;i>=0&&r>=0;--i,--r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t-1,r=o+1;i>=0&&r<8;--i,++r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t+1,r=o-1;i<8&&r>=0;++i,--r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t+1,r=o+1;i<8&&r<8;++i,++r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}return e},t}(l),y=function(e){function t(t,o,i,r){var n=e.call(this,t,o,i,3,r)||this;return n.isMovedAlready=!1,n}return a(t,e),t.prototype.getPossibleMoves=function(){var e=[],t=this.point.row,o=this.point.col;return this.board.isFieldEmpty(t-2,o-1)&&e.push(new p(t-2,o-1)),this.board.isFieldEmpty(t-2,o+1)&&e.push(new p(t-2,o+1)),this.board.isFieldEmpty(t-1,o-2)&&e.push(new p(t-1,o-2)),this.board.isFieldEmpty(t-1,o+2)&&e.push(new p(t-1,o+2)),this.board.isFieldEmpty(t+1,o-2)&&e.push(new p(t+1,o-2)),this.board.isFieldEmpty(t+1,o+2)&&e.push(new p(t+1,o+2)),this.board.isFieldEmpty(t+2,o-1)&&e.push(new p(t+2,o-1)),this.board.isFieldEmpty(t+2,o+1)&&e.push(new p(t+2,o+1)),e},t.prototype.getPossibleCaptures=function(){var e=[],t=this.point.row,o=this.point.col;return this.board.isFieldTakenByEnemy(t-2,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-2,o-1)),this.board.isFieldTakenByEnemy(t-2,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-2,o+1)),this.board.isFieldTakenByEnemy(t-1,o-2,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o-2)),this.board.isFieldTakenByEnemy(t-1,o+2,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o+2)),this.board.isFieldTakenByEnemy(t+1,o-2,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o-2)),this.board.isFieldTakenByEnemy(t+1,o+2,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o+2)),this.board.isFieldTakenByEnemy(t+2,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+2,o-1)),this.board.isFieldTakenByEnemy(t+2,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+2,o+1)),e},t.prototype.getCoveredFields=function(){var e=[],t=this.point.row,o=this.point.col;return e.push(new p(t-2,o-1)),e.push(new p(t-2,o+1)),e.push(new p(t-1,o-2)),e.push(new p(t-1,o+2)),e.push(new p(t+1,o-2)),e.push(new p(t+1,o+2)),e.push(new p(t+2,o-1)),e.push(new p(t+2,o+1)),e},t}(l),v=function(e){function t(t,o,i,r){var n=e.call(this,t,o,i,1,r)||this;return n.isMovedAlready=!1,n}return a(t,e),t.prototype.getPossibleMoves=function(){var e=[],t=this.point.row,o=this.point.col;return!this.board.reverted&&this.color===d.WHITE||this.board.reverted&&this.color===d.BLACK?this.board.isFieldEmpty(t-1,o)&&(e.push(new p(t-1,o)),!this.isMovedAlready&&this.board.isFieldEmpty(t-2,o)&&e.push(new p(t-2,o))):
/*!board.isFieldTakenByEnemy(row + 1, col, Color.WHITE) &&*/this.board.isFieldEmpty(t+1,o)&&(e.push(new p(t+1,o)),!this.isMovedAlready&&this.board.isFieldEmpty(t+2,o)&&e.push(new p(t+2,o))),e},t.prototype.getPossibleCaptures=function(){var e=[],t=this.point.row,o=this.point.col;return!this.board.reverted&&this.color===d.WHITE||this.board.reverted&&this.color===d.BLACK?(this.board.isFieldTakenByEnemy(t-1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o-1)),this.board.isFieldTakenByEnemy(t-1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t-1,o+1))):(this.board.isFieldTakenByEnemy(t+1,o-1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o-1)),this.board.isFieldTakenByEnemy(t+1,o+1,this.color===d.WHITE?d.BLACK:d.WHITE)&&e.push(new p(t+1,o+1))),this.board.enPassantPoint&&this.board.enPassantPiece.color===(this.color===d.WHITE?d.BLACK:d.WHITE)&&t===this.board.enPassantPiece.point.row&&1===Math.abs(this.board.enPassantPiece.point.col-o)&&e.push(this.board.enPassantPoint),e},t.prototype.getCoveredFields=function(){var e=[],t=this.point.row,o=this.point.col;return!this.board.reverted&&this.color===d.WHITE||this.board.reverted&&this.color===d.BLACK?(e.push(new p(t-1,o-1)),e.push(new p(t-1,o+1))):(e.push(new p(t+1,o-1)),e.push(new p(t+1,o+1))),e},t}(l),w=function(e){function t(t,o,i,r){return e.call(this,t,o,i,9,r)||this}return a(t,e),t.prototype.getPossibleMoves=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t-1,r=o-1;i>=0&&r>=0&&this.board.isFieldEmpty(i,r);--i,--r)e.push(new p(i,r));for(i=t-1,r=o+1;i>=0&&r<8&&this.board.isFieldEmpty(i,r);--i,++r)e.push(new p(i,r));for(i=t+1,r=o-1;i<8&&r>=0&&this.board.isFieldEmpty(i,r);++i,--r)e.push(new p(i,r));for(i=t+1,r=o+1;i<8&&r<8&&this.board.isFieldEmpty(i,r);++i,++r)e.push(new p(i,r));for(i=t+1;i<8&&this.board.isFieldEmpty(i,o);++i)e.push(new p(i,o));for(i=t-1;i>=0&&this.board.isFieldEmpty(i,o);--i)e.push(new p(i,o));for(r=o-1;r>=0&&this.board.isFieldEmpty(t,r);--r)e.push(new p(t,r));for(r=o+1;r<8&&this.board.isFieldEmpty(t,r);++r)e.push(new p(t,r));return e},t.prototype.getPossibleCaptures=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t-1,r=o-1;i>=0&&r>=0;--i,--r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t-1,r=o+1;i>=0&&r<8;--i,++r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t+1,r=o-1;i<8&&r>=0;++i,--r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t+1,r=o+1;i<8&&r<8;++i,++r){if(this.board.isFieldTakenByEnemy(i,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(i=t+1;i<8;++i){if(this.board.isFieldTakenByEnemy(i,o,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(i=t-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(i,o,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(i,o));break}if(!this.board.isFieldEmpty(i,o))break}for(r=o-1;r>=0;--r){if(this.board.isFieldTakenByEnemy(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(t,r));break}if(!this.board.isFieldEmpty(t,r))break}for(r=o+1;r<8;++r){if(this.board.isFieldTakenByEnemy(t,r,this.color===d.WHITE?d.BLACK:d.WHITE)){e.push(new p(t,r));break}if(!this.board.isFieldEmpty(t,r))break}return e},t.prototype.getCoveredFields=function(){for(var e=[],t=this.point.row,o=this.point.col,i=t+1;i<8;++i){if(!this.board.isFieldEmpty(i,o)){this.board.getPieceByField(i,o)instanceof b||e.push(new p(i,o));break}e.push(new p(i,o))}for(i=t-1;i>=0;--i){if(!this.board.isFieldEmpty(i,o)){this.board.getPieceByField(i,o)instanceof b||e.push(new p(i,o));break}e.push(new p(i,o))}for(var r=o-1;r>=0;--r){if(!this.board.isFieldEmpty(t,r)){this.board.getPieceByField(t,r)instanceof b||e.push(new p(t,r));break}e.push(new p(t,r))}for(r=o+1;r<8;++r){if(!this.board.isFieldEmpty(t,r)){this.board.getPieceByField(t,r)instanceof b||e.push(new p(t,r));break}e.push(new p(t,r))}for(i=t-1,r=o-1;i>=0&&r>=0;--i,--r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t-1,r=o+1;i>=0&&r<8;--i,++r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t+1,r=o-1;i<8&&r>=0;++i,--r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}for(i=t+1,r=o+1;i<8&&r<8;++i,++r){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof b||e.push(new p(i,r));break}e.push(new p(i,r))}return e},t}(l),g={WHITE_KING:{name:"King",icon:"&#x2654;"},WHITE_QUEEN:{name:"Queen",icon:"&#x2655;"},WHITE_KNIGHT:{name:"Knight",icon:"&#x2658"},WHITE_ROOK:{name:"Rook",icon:"&#x2656"},WHITE_PAWN:{name:"Pawn",icon:"&#x2659"},WHITE_BISHOP:{name:"Bishop",icon:"&#x2657"},BLACK_KING:{name:"King",icon:"&#x265A"},BLACK_QUEEN:{name:"Queen",icon:"&#x265B"},BLACK_KNIGHT:{name:"Knight",icon:"&#x265E"},BLACK_ROOK:{name:"Rook",icon:"&#x265C"},BLACK_PAWN:{name:"Pawn",icon:"&#x265F"},BLACK_BISHOP:{name:"Bishop",icon:"&#x265D"}},E=function(){function e(e){this.board=e}return e.prototype.addPieces=function(){this.board.pieces=[];for(var e=0;e<8;++e)this.board.pieces.push(new v(new p(1,e),d.BLACK,g.BLACK_PAWN,this.board));this.board.pieces.push(new u(new p(0,0),d.BLACK,g.BLACK_ROOK,this.board)),this.board.pieces.push(new y(new p(0,1),d.BLACK,g.BLACK_KNIGHT,this.board)),this.board.pieces.push(new f(new p(0,2),d.BLACK,g.BLACK_BISHOP,this.board)),this.board.pieces.push(new w(new p(0,3),d.BLACK,g.BLACK_QUEEN,this.board)),this.board.pieces.push(new b(new p(0,4),d.BLACK,g.BLACK_KING,this.board)),this.board.pieces.push(new f(new p(0,5),d.BLACK,g.BLACK_BISHOP,this.board)),this.board.pieces.push(new y(new p(0,6),d.BLACK,g.BLACK_KNIGHT,this.board)),this.board.pieces.push(new u(new p(0,7),d.BLACK,g.BLACK_ROOK,this.board));for(e=0;e<8;++e)this.board.pieces.push(new v(new p(6,e),d.WHITE,g.WHITE_PAWN,this.board));this.board.pieces.push(new u(new p(7,0),d.WHITE,g.WHITE_ROOK,this.board)),this.board.pieces.push(new y(new p(7,1),d.WHITE,g.WHITE_KNIGHT,this.board)),this.board.pieces.push(new f(new p(7,2),d.WHITE,g.WHITE_BISHOP,this.board)),this.board.pieces.push(new w(new p(7,3),d.WHITE,g.WHITE_QUEEN,this.board)),this.board.pieces.push(new b(new p(7,4),d.WHITE,g.WHITE_KING,this.board)),this.board.pieces.push(new f(new p(7,5),d.WHITE,g.WHITE_BISHOP,this.board)),this.board.pieces.push(new y(new p(7,6),d.WHITE,g.WHITE_KNIGHT,this.board)),this.board.pieces.push(new u(new p(7,7),d.WHITE,g.WHITE_ROOK,this.board)),this.board.calculateFEN()},e.prototype.loadFEN=function(e){if(console.log(e),!e)throw Error("Incorrect FEN provided");this.board.reverted=!1,this.board.pieces=[];for(var t=e.split("/"),o=0;o<8;++o)for(var i=0,r=0;r<8;++r){var n=t[o].charAt(r);if(n.match(/[0-9]/))i+=Number(n);else{switch(n){case"r":this.board.pieces.push(new u(new p(o,i),d.BLACK,g.BLACK_ROOK,this.board));break;case"n":this.board.pieces.push(new y(new p(o,i),d.BLACK,g.BLACK_KNIGHT,this.board));break;case"b":this.board.pieces.push(new f(new p(o,i),d.BLACK,g.BLACK_BISHOP,this.board));break;case"q":this.board.pieces.push(new w(new p(o,i),d.BLACK,g.BLACK_QUEEN,this.board));break;case"k":this.board.pieces.push(new b(new p(o,i),d.BLACK,g.BLACK_KING,this.board));break;case"p":((s=new v(new p(o,i),d.BLACK,g.BLACK_PAWN,this.board)).color===d.BLACK&&1!==s.point.row||s.color===d.WHITE&&6!==s.point.row)&&(s.isMovedAlready=!0),this.board.pieces.push(s);break;case"R":this.board.pieces.push(new u(new p(o,i),d.WHITE,g.WHITE_ROOK,this.board));break;case"N":this.board.pieces.push(new y(new p(o,i),d.WHITE,g.WHITE_KNIGHT,this.board));break;case"B":this.board.pieces.push(new f(new p(o,i),d.WHITE,g.WHITE_BISHOP,this.board));break;case"Q":this.board.pieces.push(new w(new p(o,i),d.WHITE,g.WHITE_QUEEN,this.board));break;case"K":this.board.pieces.push(new b(new p(o,i),d.WHITE,g.WHITE_KING,this.board));break;case"P":var s;((s=new v(new p(o,i),d.WHITE,g.WHITE_PAWN,this.board)).color===d.BLACK&&1!==s.point.row||s.color===d.WHITE&&6!==s.point.row)&&(s.isMovedAlready=!0),this.board.pieces.push(s)}++i}}this.setCurrentPlayer(e),this.setCastles(e),this.setEnPassant(e),this.setFullMoveCount(e)},e.prototype.setBoard=function(e){this.board=e},e.prototype.setCurrentPlayer=function(e){if(e){var t=e.split(" ");this.board.currentWhitePlayer="w"===t[1]}},e.prototype.setCastles=function(e){if(e){var t=e.split(" ")[2];t.includes("K")||this.setRookAlreadyMoved(d.WHITE,7),t.includes("Q")||this.setRookAlreadyMoved(d.WHITE,0),t.includes("k")||this.setRookAlreadyMoved(d.BLACK,7),t.includes("q")||this.setRookAlreadyMoved(d.BLACK,0)}},e.prototype.setFullMoveCount=function(e){},e.prototype.setEnPassant=function(e){if(e&&"-"===e.split(" ")[3])return},e.prototype.setRookAlreadyMoved=function(e,t){var o=this.board.pieces.find((function(o){return o.color===e&&o instanceof u&&o.point.col===t}));o&&(o.isMovedAlready=!0)},e}(),C=function(e){this.board=e},P=function(){function e(){this.statesSubject$=new r.BehaviorSubject([])}return Object.defineProperty(e.prototype,"states",{get:function(){return this.statesSubject$.value},set:function(e){this.statesSubject$.next(e)},enumerable:!1,configurable:!0}),e.prototype.addMove=function(e){this.states=h(this.states,[e])},e.prototype.getStates=function(){return this.states},e.prototype.pop=function(){var e=this.getLastState();return this.states=this.states.filter((function(t){return t!==e})),e},e.prototype.isEmpty=function(){return 0===this.states.length},e.prototype.clear=function(){this.states=[]},e.prototype.getLastState=function(){return this.states[this.getLastStateIndex()]},e.prototype.getLastStateIndex=function(){return this.states.length-1},e}(),m=function(){function e(){this.defaultXCoords=["a","b","c","d","e","f","g","h"],this.defaultYCoords=[8,7,6,5,4,3,2,1],this.currentXCoords=h(this.defaultXCoords),this.currentYCoords=h(this.defaultYCoords)}return Object.defineProperty(e.prototype,"xCoords",{get:function(){return this.currentXCoords},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yCoords",{get:function(){return this.currentYCoords},enumerable:!1,configurable:!0}),e.prototype.reverse=function(){this.currentXCoords=this.currentXCoords.reverse(),this.currentYCoords=this.currentYCoords.reverse()},e.prototype.reset=function(){this.init()},e.prototype.init=function(){this.currentXCoords=h(this.defaultXCoords),this.currentYCoords=h(this.defaultYCoords)},e}(),I=function(){function e(){}return e.prototype.isEqual=function(e){return e&&this.start.isEqual(e.start)&&this.end.isEqual(e.end)},e}(),k=function(){function e(){}return e.prototype.isEqual=function(e){return e&&this.drawPoint.isEqual(e.drawPoint)},e}(),T=function(){function e(e,t,o){this.x=e+.5,this.y=t+.5,this.color=o}return e.prototype.isEqual=function(e){return e&&e.x===this.x&&this.y===e.y},e}(),A=function(){function e(){this.arrowsSubject$=new r.BehaviorSubject([]),this.circlesSubject$=new r.BehaviorSubject([]),this.arrows$=this.arrowsSubject$.asObservable(),this.circles$=this.circlesSubject$.asObservable()}return Object.defineProperty(e.prototype,"circles",{get:function(){return this.circlesSubject$.value},set:function(e){this.circlesSubject$.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arrows",{get:function(){return this.arrowsSubject$.value},set:function(e){this.arrowsSubject$.next(e)},enumerable:!1,configurable:!0}),e.prototype.addCircle=function(e){this.circles=h(this.circles,[e])},e.prototype.reomveCircle=function(e){this.circles=this.circles.filter((function(t){return!t.isEqual(e)}))},e.prototype.addArrow=function(e){this.arrows=h(this.arrows,[e])},e.prototype.removeArrow=function(e){this.arrows=this.arrows.filter((function(t){return!t.isEqual(e)}))},e.prototype.containsCircle=function(e){return this.circles.some((function(t){return t.isEqual(e)}))},e.prototype.containsArrow=function(e){return this.arrows.some((function(t){return t.isEqual(e)}))},e.prototype.clear=function(){this.arrows=[],this.circles=[]},e}(),B=function(e,t,o,i){this.move=e,this.piece=t,this.color=o,this.x=i},M=function(){function e(){this.historyMovesSubject$=new r.BehaviorSubject([])}return Object.defineProperty(e.prototype,"historyMoves",{get:function(){return this.historyMovesSubject$.value},set:function(e){this.historyMovesSubject$.next(e)},enumerable:!1,configurable:!0}),e.prototype.addMove=function(e){this.historyMoves=h(this.historyMoves,[e])},e.prototype.pop=function(){var e=this.getLastMove();return this.historyMoves=this.historyMoves.filter((function(t){return t!==e})),e},e.prototype.getAll=function(){return this.historyMoves},e.prototype.clear=function(){this.historyMoves=[]},e.prototype.getLastMove=function(){return this.historyMoves[this.getLastMoveIndex()]},e.prototype.getLastMoveIndex=function(){return this.historyMoves.length-1},e}(),F=function(){function e(){this.board=[],this.pieces=[],this.enPassantPoint=null,this.enPassantPiece=null,this.lastMoveSrc=null,this.lastMoveDest=null,this.possibleCaptures=[],this.possibleMoves=[],this.currentWhitePlayer=!0,this.reverted=!1,this.fullMoveCount=1;for(var e=0;e<8;++e){this.board[e]=[];for(var t=0;t<8;++t)this.board[e][t]=0}}return e.prototype.isXYInPossibleMoves=function(e,t){return this.possibleMoves.some((function(o){return o.row===e&&o.col===t}))},e.prototype.isXYInPossibleCaptures=function(e,t){return this.possibleCaptures.some((function(o){return o.row===e&&o.col===t}))},e.prototype.isXYInSourceMove=function(e,t){return this.lastMoveSrc&&this.lastMoveSrc.row===e&&this.lastMoveSrc.col===t},e.prototype.isXYInDestMove=function(e,t){return this.lastMoveDest&&this.lastMoveDest.row===e&&this.lastMoveDest.col===t},e.prototype.isXYInActiveMove=function(e,t){return this.activePiece&&this.activePiece.point.row===e&&this.activePiece.point.col===t},e.prototype.isPointInPossibleMoves=function(e){return this.possibleMoves.some((function(t){return t.row===e.row&&t.col===e.col}))},e.prototype.isPointInPossibleCaptures=function(e){return this.possibleCaptures.some((function(t){return t.row===e.row&&t.col===e.col}))},e.prototype.reset=function(){this.lastMoveDest=null,this.lastMoveSrc=null,this.whiteKingChecked=!1,this.blackKingChecked=!1,this.possibleCaptures=[],this.possibleMoves=[],this.activePiece=null,this.reverted=!1,this.currentWhitePlayer=!0,this.enPassantPoint=null,this.enPassantPiece=null,this.fullMoveCount=1,this.calculateFEN()},e.prototype.reverse=function(){var e=this;this.reverted=!this.reverted,this.activePiece=null,this.possibleMoves=[],this.possibleCaptures=[],this.pieces.forEach((function(t){return e.reversePoint(t.point)})),this.reversePoint(this.lastMoveSrc),this.enPassantPoint&&this.enPassantPiece&&this.reversePoint(this.enPassantPoint)},e.prototype.clone=function(){return n.cloneDeep(this)},e.prototype.isFieldTakenByEnemy=function(e,t,o){return!(e>7||e<0||t>7||t<0)&&this.pieces.some((function(i){return i.point.col===t&&i.point.row===e&&i.color===o}))},e.prototype.isFieldEmpty=function(e,t){return!(e>7||e<0||t>7||t<0)&&!this.pieces.some((function(o){return o.point.col===t&&o.point.row===e}))},e.prototype.isFieldUnderAttack=function(e,t,o){return this.pieces.filter((function(e){return e.color===o})).some((function(o){return o.getCoveredFields().some((function(o){return o.col===t&&o.row===e}))}))},e.prototype.getPieceByField=function(e,t){if(!this.isFieldEmpty(e,t))return this.pieces.find((function(o){return o.point.col===t&&o.point.row===e}))},e.prototype.isKingInCheck=function(e,t){var o=t.find((function(t){return t.color===e&&t instanceof b}));return!!o&&t.some((function(t){return t.getPossibleCaptures().some((function(e){return e.col===o.point.col&&e.row===o.point.row}))&&t.color!==e}))},e.prototype.getKingByColor=function(e){return this.pieces.find((function(t){return t instanceof b&&t.color===e}))},e.prototype.getCastleFENString=function(e){var t=this.getKingByColor(e);if(t.isMovedAlready)return"";var o="",i=this.getPieceByField(t.point.row,0),r=this.getPieceByField(t.point.row,7);return r instanceof u&&r.color===e&&(r.isMovedAlready||(o+=this.reverted?"q":"k")),i instanceof u&&i.color===e&&(i.isMovedAlready||(o+=this.reverted?"k":"q")),o=o.split("").sort().join(""),e===d.BLACK?o:o.toUpperCase()},e.prototype.getEnPassantFENString=function(){return this.enPassantPoint?this.reverted?String.fromCharCode(104-this.enPassantPoint.col)+(this.enPassantPoint.row+1):String.fromCharCode(97+this.enPassantPoint.col)+(Math.abs(this.enPassantPoint.row-7)+1):"-"},e.prototype.calculateFEN=function(){for(var e="",t=function(t){for(var i=0,r=function(r){var n=o.pieces.find((function(e){return e.point.col===r&&e.point.row===t}));n?(i>0&&(e+=i,i=0),n instanceof u?e+=n.color===d.BLACK?"r":"R":n instanceof y?e+=n.color===d.BLACK?"n":"N":n instanceof f?e+=n.color===d.BLACK?"b":"B":n instanceof w?e+=n.color===d.BLACK?"q":"Q":n instanceof b?e+=n.color===d.BLACK?"k":"K":n instanceof v&&(e+=n.color===d.BLACK?"p":"P")):++i},n=0;n<8;++n)r(n);i>0&&(e+=i),e+="/"},o=this,i=0;i<8;++i)t(i);e=e.substr(0,e.length-1),this.reverted&&(e=e.split("").reverse().join("")),e+=" "+(this.currentWhitePlayer?"w":"b");var r=this.getCastleFENString(d.WHITE)+this.getCastleFENString(d.BLACK);r||(r="-"),e+=" "+r,e+=" "+this.getEnPassantFENString(),e+=" 0",e+=" "+this.fullMoveCount,this.fen=e},e.prototype.isXYInPointSelection=function(e,t){return!1},e.prototype.reversePoint=function(e){e&&(e.row=Math.abs(e.row-7),e.col=Math.abs(e.col-7))},e}(),H=function(){function e(e,t,o){this._xAxis=e,this._yAxis=t,this._reverted=o}return Object.defineProperty(e.prototype,"xAxis",{get:function(){return this._xAxis},set:function(e){this._xAxis=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yAxis",{get:function(){return this._yAxis},set:function(e){this._yAxis=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reverted",{get:function(){return this._reverted},set:function(e){this._reverted=e},enumerable:!1,configurable:!0}),e}(),W=function(){function e(){}return e.willMoveCauseCheck=function(e,t,o,i,r,n){var s=n.getPieceByField(t,o),a=n.getPieceByField(i,r);s&&(s.point.row=i,s.point.col=r),a&&(n.pieces=n.pieces.filter((function(e){return e!==a})));var c=n.isKingInCheck(e,n.pieces);return s&&(s.point.col=o,s.point.row=t),a&&n.pieces.push(a),c},e.format=function(e,t,o){if(o){var i=104-e.col,r=104-t.col;return String.fromCharCode(i)+(e.row+1)+String.fromCharCode(r)+(t.row+1)}return String.fromCharCode(e.col+97)+(Math.abs(e.row-7)+1)+String.fromCharCode(t.col+97)+(Math.abs(t.row-7)+1)},e.translateCoordsToIndex=function(e,t){var o,i;return t?(o=104-e.charCodeAt(0),i=+e.charAt(1)-1):(o=e.charCodeAt(0)-97,i=Math.abs(+e.charAt(1)-8)),new H(o,i,t)},e}(),K=function(e){function t(t,o,i,r){var n=e.call(this,t)||this;return n.pointClicked=o,n.color=i,n.board=r,n}return a(t,e),t.prototype.getPossibleCaptures=function(){var e=this;return this.piece.getPossibleCaptures().filter((function(t){return!W.willMoveCauseCheck(e.color,e.pointClicked.row,e.pointClicked.col,t.row,t.col,e.board)}))},t.prototype.getPossibleMoves=function(){var e=this;return this.piece.getPossibleMoves().filter((function(t){return!W.willMoveCauseCheck(e.color,e.pointClicked.row,e.pointClicked.col,t.row,t.col,e.board)}))},t}((function(e){this.piece=e})),x=function(){};x.DEFAULT_DARK_TILE_COLOR="rgb(97, 84, 61)",x.DEFAULT_LIGHT_TILE_COLOR="#BAA378",x.DEFAULT_SIZE=500,x.MIN_BOARD_SIZE=100,x.MAX_BOARD_SIZE=4e3;var L=function(){function e(){this._defaultIcons=!1}return Object.defineProperty(e.prototype,"pieceIconInput",{get:function(){return this._pieceIconInput},set:function(e){this._pieceIconInput=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultIcons",{get:function(){return this._defaultIcons},set:function(e){this._defaultIcons=e},enumerable:!1,configurable:!0}),e.prototype.isDefaultIcons=function(){return void 0===this.pieceIconInput||null===this.pieceIconInput},e.prototype.getPieceIcon=function(e){var t=e.color===d.WHITE;switch(e.constructor){case b:return t?this.pieceIconInput.whiteKingUrl:this.pieceIconInput.blackKingUrl;case w:return t?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;case u:return t?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;case f:return t?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;case y:return t?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl;case v:return t?this.pieceIconInput.whitePawnUrl:this.pieceIconInput.blackPawnUrl}},e.prototype.loadDefaultData=function(){this.pieceIconInput={blackBishopUrl:"",blackKingUrl:"",blackKnightUrl:"",blackQueenUrl:"",blackRookUrl:"",whiteBishopUrl:"",whiteKingUrl:"",whiteKnightUrl:"",whitePawnUrl:"",whiteQueenUrl:"",whiteRookUrl:"",blackPawnUrl:"a"}},e}(),_=function(){function e(){this.componentMethodCallSource=new r.Subject,this.componentMethodCalled$=this.componentMethodCallSource.asObservable()}return e.prototype.reset=function(){this.componentMethodCallSource.next()},e}();_.ɵfac=function(e){return new(e||_)},_.ɵprov=i.ɵɵdefineInjectable({token:_,factory:_.ɵfac,providedIn:"root"});var S=["myModal"],O=function(){function e(){this.opened=!1}return e.prototype.open=function(e){this.opened=!0,this.onCloseCallback=e,this.modal.nativeElement.style.display="block"},e.prototype.changeSelection=function(e){this.modal.nativeElement.style.display="none",this.opened=!1,this.onCloseCallback(e)},e}();O.ɵfac=function(e){return new(e||O)},O.ɵcmp=i.ɵɵdefineComponent({type:O,selectors:[["app-piece-promotion-modal"]],viewQuery:function(e,t){var o;(1&e&&i.ɵɵviewQuery(S,!0),2&e)&&(i.ɵɵqueryRefresh(o=i.ɵɵloadQuery())&&(t.modal=o.first))},decls:13,vars:0,consts:[[1,"container"],["myModal",""],[1,"wrapper"],[1,"content"],[1,"piece-wrapper"],[1,"piece",3,"click"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0,1),i.ɵɵelementStart(2,"div",2),i.ɵɵelementStart(3,"div",3),i.ɵɵelementStart(4,"div",4),i.ɵɵelementStart(5,"div",5),i.ɵɵlistener("click",(function(){return t.changeSelection(1)})),i.ɵɵtext(6,"♛"),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"div",5),i.ɵɵlistener("click",(function(){return t.changeSelection(2)})),i.ɵɵtext(8,"♜"),i.ɵɵelementEnd(),i.ɵɵelementStart(9,"div",5),i.ɵɵlistener("click",(function(){return t.changeSelection(3)})),i.ɵɵtext(10,"♝"),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"div",5),i.ɵɵlistener("click",(function(){return t.changeSelection(4)})),i.ɵɵtext(12,"♞"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd())},styles:[".container[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);color:#000;display:none;overflow:auto;position:absolute;top:0;z-index:1}.container[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.content[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]{position:relative}.content[_ngcontent-%COMP%]{background-color:#fefefe;border:1px solid #888;font-size:100%;height:40%;margin:auto;padding:10px;top:30%;width:90%}.piece[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;font-size:5rem;height:100%;width:25%}.piece[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:5px}.piece-wrapper[_ngcontent-%COMP%]{height:80%;width:100%}#close-button[_ngcontent-%COMP%]{background-color:#4caf50;border:none;border-radius:4px;color:#fff;display:inline-block;padding-left:5px;padding-right:5px;text-align:center;text-decoration:none}.selected[_ngcontent-%COMP%]{border:2px solid #00b919;border-radius:4px;box-sizing:border-box}"]});var D=["boardRef"],U=["modal"];function N(e,t){if(1&e&&(i.ɵɵelementStart(0,"span",15),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var o=i.ɵɵnextContext(2).index,r=i.ɵɵnextContext();i.ɵɵstyleProp("color",o%2==0?r.lightTileColor:r.darkTileColor)("font-size",r.pieceSize/4,"px"),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",r.coords.yCoords[o]," ")}}function R(e,t){if(1&e&&(i.ɵɵelementStart(0,"span",16),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var o=i.ɵɵnextContext().index,r=i.ɵɵnextContext(2);i.ɵɵstyleProp("color",o%2==0?r.lightTileColor:r.darkTileColor)("font-size",r.pieceSize/4,"px"),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",r.coords.xCoords[o]," ")}}function j(e,t){if(1&e){var o=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",17),i.ɵɵelementStart(1,"div",18),i.ɵɵlistener("cdkDragEnded",(function(e){return i.ɵɵrestoreView(o),i.ɵɵnextContext(3).dragEnded(e)}))("cdkDragStarted",(function(e){return i.ɵɵrestoreView(o),i.ɵɵnextContext(3).dragStart(e)})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().index,n=i.ɵɵnextContext().index,s=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵstyleProp("font-size",s.pieceSize+"px"),i.ɵɵproperty("cdkDragDisabled",s.dragDisabled)("innerHTML",s.pieceIconManager.isDefaultIcons()?s.getPieceByPoint(n,r).constant.icon:"",i.ɵɵsanitizeHtml)("ngClass","piece")("ngStyle",s.pieceIconManager.isDefaultIcons()?"":s.getCustomPieceIcons(s.getPieceByPoint(n,r)))}}function q(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",11),i.ɵɵtemplate(1,N,2,5,"span",12),i.ɵɵtemplate(2,R,2,5,"span",13),i.ɵɵtemplate(3,j,2,6,"div",14),i.ɵɵelementEnd()),2&e){var o=t.index,r=i.ɵɵnextContext().index,n=i.ɵɵnextContext();i.ɵɵstyleProp("background-color",(r+o)%2==0?n.lightTileColor:n.darkTileColor),i.ɵɵclassProp("current-selection",n.board.isXYInActiveMove(r,o))("dest-move",n.board.isXYInDestMove(r,o))("king-check",n.isKingChecked(n.getPieceByPoint(r,o)))("point-circle",n.board.isXYInPointSelection(r,o))("possible-capture",n.board.isXYInPossibleCaptures(r,o))("possible-point",n.board.isXYInPossibleMoves(r,o))("source-move",n.board.isXYInSourceMove(r,o)),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.showCoords&&7===o),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.showCoords&&7===r),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.getPieceByPoint(r,o))}}function z(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",9),i.ɵɵtemplate(1,q,4,19,"div",10),i.ɵɵelementEnd()),2&e){var o=t.$implicit;i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",o)}}function Q(e,t){if(1&e&&(i.ɵɵnamespaceSVG(),i.ɵɵelementStart(0,"defs"),i.ɵɵelementStart(1,"marker",19),i.ɵɵelement(2,"path",20),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var o=t.$implicit;i.ɵɵadvance(1),i.ɵɵproperty("id",o+"Arrow"),i.ɵɵadvance(1),i.ɵɵstyleProp("fill",o)}}function $(e,t){if(1&e&&(i.ɵɵnamespaceSVG(),i.ɵɵelement(0,"line",21)),2&e){var o=t.$implicit;i.ɵɵattribute("marker-end","url(#"+o.end.color+"Arrow)")("stroke",o.end.color)("x1",o.start.x)("x2",o.end.x)("y1",o.start.y)("y2",o.end.y)}}function X(e,t){if(1&e&&(i.ɵɵnamespaceSVG(),i.ɵɵelement(0,"circle",22)),2&e){var o=t.$implicit,r=i.ɵɵnextContext();i.ɵɵattribute("cx",o.drawPoint.x)("cy",o.drawPoint.y)("r",r.heightAndWidth/18)("stroke",o.drawPoint.color)}}var G=function(){return["red","green","blue","orange"]},Y=function(){function e(e){this.ngxChessBoardService=e,this.darkTileColor=x.DEFAULT_DARK_TILE_COLOR,this.lightTileColor=x.DEFAULT_LIGHT_TILE_COLOR,this.showCoords=!0,this.dragDisabled=!1,this.drawDisabled=!1,this.lightDisabled=!1,this.darkDisabled=!1,this.freeMode=!1,this.moveChange=new i.EventEmitter,this.checkmate=new i.EventEmitter,this.stalemate=new i.EventEmitter,this.selected=!1,this.coords=new m,this.disabling=!1,this.heightAndWidth=x.DEFAULT_SIZE,this.board=new F,this.boardLoader=new E(this.board),this.boardLoader.addPieces(),this.boardStateProvider=new P,this.moveHistoryProvider=new M,this.drawProvider=new A,this.pieceIconManager=new L}return Object.defineProperty(e.prototype,"size",{set:function(e){e&&e>=x.MIN_BOARD_SIZE&&e<=x.MAX_BOARD_SIZE?this.heightAndWidth=e:this.heightAndWidth=x.DEFAULT_SIZE,this.drawProvider.clear(),this.calculatePieceSize()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pieceIcons",{set:function(e){this.pieceIconManager.pieceIconInput=e},enumerable:!1,configurable:!0}),e.prototype.onRightClick=function(e){e.preventDefault()},e.prototype.ngOnChanges=function(e){(e.lightDisabled&&this.lightDisabled&&this.board.currentWhitePlayer||e.darkDisabled&&this.darkDisabled&&!this.board.currentWhitePlayer)&&(this.board.possibleCaptures=[],this.board.possibleMoves=[])},e.prototype.ngOnInit=function(){var e=this;this.ngxChessBoardService.componentMethodCalled$.subscribe((function(){e.board.reset()})),this.calculatePieceSize()},e.prototype.onMouseUp=function(e){if(0===e.button||this.drawDisabled){if(this.drawProvider.clear(),!this.dragDisabled){var t=this.getClickPoint(e);if(this.board.activePiece&&t.isEqual(this.board.activePiece.point)&&this.disabling)return this.disableSelection(),void(this.disabling=!1);var o=this.getPieceByPoint(t.row,t.col);this.isPieceDisabled(o)||this.selected&&this.handleClickEvent(t,!1)}}else this.addDrawPoint(e.x,e.y,e.ctrlKey,e.altKey,e.shiftKey)},e.prototype.onPieceClicked=function(e,t){this.board.currentWhitePlayer&&e.color===d.BLACK||!this.board.currentWhitePlayer&&e.color===d.WHITE||this.prepareActivePiece(e,t)},e.prototype.isFreeMode=function(){return this.freeMode},e.prototype.onFreeMode=function(e){this.isFreeMode()&&null!=e&&(this.board.currentWhitePlayer=e.color===d.WHITE)},e.prototype.afterMoveActions=function(e){this.checkIfPawnFirstMove(this.board.activePiece),this.checkIfRookMoved(this.board.activePiece),this.checkIfKingMoved(this.board.activePiece),this.board.blackKingChecked=this.board.isKingInCheck(d.BLACK,this.board.pieces),this.board.whiteKingChecked=this.board.isKingInCheck(d.WHITE,this.board.pieces);var t=this.board.blackKingChecked||this.board.whiteKingChecked,o=this.checkForPossibleMoves(d.BLACK)||this.checkForPossibleMoves(d.WHITE),i=this.checkForPat(d.BLACK)||this.checkForPat(d.WHITE);this.disabling=!1,this.board.calculateFEN();var r=this.moveHistoryProvider.getLastMove();r&&e&&(r.move+=e),this.moveChange.emit(Object.assign(Object.assign({},r),{check:t,checkmate:o,stalemate:i,fen:this.board.fen,freeMode:this.freeMode}))},e.prototype.disableSelection=function(){this.selected=!1,this.board.possibleCaptures=[],this.board.activePiece=null,this.board.possibleMoves=[]},e.prototype.prepareActivePiece=function(e,t){this.board.activePiece=e,this.selected=!0,this.board.possibleCaptures=new K(e,t,this.board.currentWhitePlayer?d.WHITE:d.BLACK,this.board).getPossibleCaptures(),this.board.possibleMoves=new K(e,t,this.board.currentWhitePlayer?d.WHITE:d.BLACK,this.board).getPossibleMoves()},e.prototype.getPieceByPoint=function(e,t){return e=Math.floor(e),t=Math.floor(t),this.board.pieces.find((function(o){return o.point.col===t&&o.point.row===e}))},e.prototype.isKingChecked=function(e){if(e instanceof b)return e.color===d.WHITE?this.board.whiteKingChecked:this.board.blackKingChecked},e.prototype.getClickPoint=function(e){return new p(Math.floor((e.y-this.boardRef.nativeElement.getBoundingClientRect().top)/(this.boardRef.nativeElement.getBoundingClientRect().height/8)),Math.floor((e.x-this.boardRef.nativeElement.getBoundingClientRect().left)/(this.boardRef.nativeElement.getBoundingClientRect().width/8)))},e.prototype.movePiece=function(e,t,o){var i=this.board.pieces.find((function(e){return e.point.col===t.col&&e.point.row===t.row}));if(i&&e.color!==i.color)this.board.pieces=this.board.pieces.filter((function(e){return e!==i}));else if(i&&e.color===i.color)return;var r=new B(W.format(e.point,t,this.board.reverted),e.constant.name,e.color===d.WHITE?"white":"black",!!i);if((this.moveHistoryProvider.addMove(r),e instanceof b)&&Math.abs(t.col-e.point.col)>1)if(t.col<3){var n=this.board.getPieceByField(e.point.row,0);this.freeMode||(n.point.col=this.board.reverted?2:3)}else{var s=this.board.getPieceByField(e.point.row,7);this.freeMode||(s.point.col=this.board.reverted?4:5)}e instanceof v&&(this.checkIfPawnTakesEnPassant(t),this.checkIfPawnEnpassanted(e,t)),e.point=t,this.increaseFullMoveCount(),this.board.currentWhitePlayer=!this.board.currentWhitePlayer,this.checkForPawnPromote(e,o)||this.afterMoveActions()},e.prototype.checkIfPawnFirstMove=function(e){e instanceof v&&(e.isMovedAlready=!0)},e.prototype.checkForPawnPromote=function(e,t){if(e instanceof v)return 0===e.point.row||7===e.point.row?(this.board.pieces=this.board.pieces.filter((function(t){return t!==e})),t?(this.resolvePromotionChoice(e,t),this.afterMoveActions(t)):this.openPromoteDialog(e),!0):void 0},e.prototype.openPromoteDialog=function(e){var t=this;this.modal.open((function(o){t.resolvePromotionChoice(e,o),t.afterMoveActions(o)}))},e.prototype.resolvePromotionChoice=function(e,t){var o=e.color===d.WHITE;switch(t){case 1:this.board.pieces.push(new w(e.point,e.color,o?g.WHITE_QUEEN:g.BLACK_QUEEN,this.board));break;case 2:this.board.pieces.push(new u(e.point,e.color,o?g.WHITE_ROOK:g.BLACK_ROOK,this.board));break;case 3:this.board.pieces.push(new f(e.point,e.color,o?g.WHITE_BISHOP:g.BLACK_BISHOP,this.board));break;case 4:this.board.pieces.push(new y(e.point,e.color,o?g.WHITE_KNIGHT:g.BLACK_KNIGHT,this.board))}},e.prototype.reset=function(){this.boardStateProvider.clear(),this.moveHistoryProvider.clear(),this.boardLoader.addPieces(),this.board.reset(),this.coords.reset(),this.drawProvider.clear(),this.freeMode=!1},e.prototype.reverse=function(){this.selected=!1,this.board.reverse(),this.coords.reverse()},e.prototype.updateBoard=function(e){this.board=e,this.boardLoader.setBoard(this.board),this.board.possibleCaptures=[],this.board.possibleMoves=[]},e.prototype.undo=function(){if(!this.boardStateProvider.isEmpty()){var e=this.boardStateProvider.pop().board;this.board.reverted&&e.reverse(),this.board=e,this.boardLoader.setBoard(this.board),this.board.possibleCaptures=[],this.board.possibleMoves=[],this.moveHistoryProvider.pop()}},e.prototype.getMoveHistory=function(){return this.moveHistoryProvider.getAll()},e.prototype.setFEN=function(e){try{this.boardLoader.loadFEN(e),this.board.possibleCaptures=[],this.board.possibleMoves=[],this.coords.reset()}catch(e){this.boardLoader.addPieces()}},e.prototype.getFEN=function(){return this.board.fen},e.prototype.dragEnded=function(e){e.source.reset(),e.source.element.nativeElement.style.zIndex="0",e.source.element.nativeElement.style.pointerEvents="auto",e.source.element.nativeElement.style.touchAction="auto"},e.prototype.dragStart=function(e){var t=e.source.element.nativeElement.style;t.position="relative",t.zIndex="1000",t.touchAction="none",t.pointerEvents="none"},e.prototype.onMouseDown=function(e){if(0===e.button){var t=this.getClickPoint(e);if(this.drawProvider.clear(),this.board.activePiece&&t.isEqual(this.board.activePiece.point))this.disabling=!0;else{var o=this.getPieceByPoint(t.row,t.col);this.freeMode&&o&&(this.board.currentWhitePlayer=o.color===d.WHITE),this.isPieceDisabled(o)||(this.selected?this.handleClickEvent(t,!0):o&&(this.onFreeMode(o),this.onPieceClicked(o,t)))}}else this.drawPoint=this.getDrawingPoint(e.x,e.y,e.ctrlKey,e.altKey,e.shiftKey)},e.prototype.getDrawingPoint=function(e,t,o,i,r){var n=this.heightAndWidth/8,s=Math.floor((e-this.boardRef.nativeElement.getBoundingClientRect().left)/n),a=Math.floor((t-this.boardRef.nativeElement.getBoundingClientRect().top)/n),c="green";return(o||r)&&(c="red"),i&&(c="blue"),(r||o)&&i&&(c="orange"),new T(Math.floor(s*n+n/2),Math.floor(a*n+n/2),c)},e.prototype.checkIfRookMoved=function(e){e instanceof u&&(e.isMovedAlready=!0)},e.prototype.checkIfKingMoved=function(e){e instanceof b&&(e.isMovedAlready=!0)},e.prototype.checkForPossibleMoves=function(e){var t=this;return!this.board.pieces.filter((function(t){return t.color===e})).some((function(o){return o.getPossibleMoves().some((function(i){return!W.willMoveCauseCheck(e,o.point.row,o.point.col,i.row,i.col,t.board)}))||o.getPossibleCaptures().some((function(i){return!W.willMoveCauseCheck(e,o.point.row,o.point.col,i.row,i.col,t.board)}))}))},e.prototype.checkForPat=function(e){return(e!==d.WHITE||this.board.whiteKingChecked)&&(e!==d.BLACK||this.board.blackKingChecked)?void 0:this.checkForPossibleMoves(e)},e.prototype.checkIfPawnEnpassanted=function(e,t){Math.abs(e.point.row-t.row)>1?(this.board.enPassantPiece=e,this.board.enPassantPoint=new p((e.point.row+t.row)/2,e.point.col)):(this.board.enPassantPoint=null,this.board.enPassantPiece=null)},e.prototype.checkIfPawnTakesEnPassant=function(e){var t=this;e.isEqual(this.board.enPassantPoint)&&(this.board.pieces=this.board.pieces.filter((function(e){return e!==t.board.enPassantPiece})),this.board.enPassantPoint=null,this.board.enPassantPiece=null)},e.prototype.saveClone=function(){var e=this.board.clone();this.board.reverted&&e.reverse(),this.boardStateProvider.addMove(new C(e))},e.prototype.saveMoveClone=function(){var e=this.board.clone();this.board.reverted&&e.reverse(),this.moveStateProvider.addMove(new C(e))},e.prototype.calculatePieceSize=function(){this.pieceSize=this.heightAndWidth/10},e.prototype.increaseFullMoveCount=function(){this.board.currentWhitePlayer||++this.board.fullMoveCount},e.prototype.handleClickEvent=function(e,t){var o=!1;(this.board.isPointInPossibleMoves(e)||this.board.isPointInPossibleCaptures(e)||this.freeMode)&&(this.saveClone(),this.board.lastMoveSrc=new p(this.board.activePiece.point.row,this.board.activePiece.point.col),this.board.lastMoveDest=e,this.movePiece(this.board.activePiece,e),this.board.activePiece.point.isEqual(this.board.lastMoveSrc)||(o=!0)),(t||o)&&this.disableSelection(),this.disableSelection();var i=this.getPieceByPoint(e.row,e.col);i&&!o&&(this.onFreeMode(i),this.onPieceClicked(i,e))},e.prototype.addDrawPoint=function(e,t,o,i,r){var n=this.getDrawingPoint(e,t,o,i,r);if(this.drawPoint.isEqual(n)){var s=new k;s.drawPoint=n,this.drawProvider.containsCircle(s)?this.drawProvider.reomveCircle(s):this.drawProvider.addCircle(s)}else{var a=new I;a.start=this.drawPoint,a.end=n,this.drawProvider.containsArrow(a)?this.drawProvider.removeArrow(a):this.drawProvider.addArrow(a)}},e.prototype.move=function(e){if(e){var t=W.translateCoordsToIndex(e.substring(0,2),this.board.reverted),o=W.translateCoordsToIndex(e.substring(2,4),this.board.reverted),i=this.getPieceByPoint(t.yAxis,t.xAxis);if(i){if(this.board.currentWhitePlayer&&i.color===d.BLACK||!this.board.currentWhitePlayer&&i.color===d.WHITE)return;this.prepareActivePiece(i,i.point),this.board.isPointInPossibleMoves(new p(o.yAxis,o.xAxis))||this.board.isPointInPossibleCaptures(new p(o.yAxis,o.xAxis))?(this.saveClone(),this.movePiece(i,new p(o.yAxis,o.xAxis),5===e.length?+e.substring(4,5):0),this.board.lastMoveSrc=new p(t.yAxis,t.xAxis),this.board.lastMoveDest=new p(o.yAxis,o.xAxis),this.disableSelection()):this.disableSelection()}}},e.prototype.getCustomPieceIcons=function(e){return JSON.parse('{ "background-image": "url(\''+this.pieceIconManager.getPieceIcon(e)+"')\"}")},e.prototype.isPieceDisabled=function(e){if(e&&e.point&&this.board.possibleCaptures.find((function(t){return t.col===e.point.col&&t.row===e.point.row})))return!1;return e&&(this.lightDisabled&&e.color===d.WHITE||this.darkDisabled&&e.color===d.BLACK)},e}();Y.ɵfac=function(e){return new(e||Y)(i.ɵɵdirectiveInject(_))},Y.ɵcmp=i.ɵɵdefineComponent({type:Y,selectors:[["ngx-chess-board"]],viewQuery:function(e,t){var o;(1&e&&(i.ɵɵviewQuery(D,!0),i.ɵɵviewQuery(U,!0)),2&e)&&(i.ɵɵqueryRefresh(o=i.ɵɵloadQuery())&&(t.boardRef=o.first),i.ɵɵqueryRefresh(o=i.ɵɵloadQuery())&&(t.modal=o.first))},hostBindings:function(e,t){1&e&&i.ɵɵlistener("contextmenu",(function(e){return t.onRightClick(e)}))},inputs:{darkTileColor:"darkTileColor",lightTileColor:"lightTileColor",showCoords:"showCoords",dragDisabled:"dragDisabled",drawDisabled:"drawDisabled",lightDisabled:"lightDisabled",darkDisabled:"darkDisabled",freeMode:"freeMode",size:"size",pieceIcons:"pieceIcons"},outputs:{moveChange:"moveChange",checkmate:"checkmate",stalemate:"stalemate"},features:[i.ɵɵNgOnChangesFeature],decls:12,vars:15,consts:[["id","board",3,"pointerdown","pointerup"],["boardRef",""],["id","drag"],["class","board-row",4,"ngFor","ngForOf"],[2,"position","absolute","top","0","pointer-events","none"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngFor","ngForOf"],["fill-opacity","0.0","stroke-width","2",4,"ngFor","ngForOf"],["modal",""],[1,"board-row"],["class","board-col",3,"current-selection","dest-move","king-check","point-circle","possible-capture","possible-point","source-move","background-color",4,"ngFor","ngForOf"],[1,"board-col"],["class","yCoord",3,"color","font-size",4,"ngIf"],["class","xCoord",3,"color","font-size",4,"ngIf"],["style","height:100%; width:100%",4,"ngIf"],[1,"yCoord"],[1,"xCoord"],[2,"height","100%","width","100%"],["cdkDrag","",3,"cdkDragDisabled","innerHTML","ngClass","ngStyle","cdkDragEnded","cdkDragStarted"],["markerHeight","13","markerWidth","13","orient","auto","refX","9","refY","6",3,"id"],["d","M2,2 L2,11 L10,6 L2,2"],[1,"arrow"],["fill-opacity","0.0","stroke-width","2"]],template:function(e,t){if(1&e){var o=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",0,1),i.ɵɵlistener("pointerdown",(function(e){return i.ɵɵrestoreView(o),!i.ɵɵreference(11).opened&&t.onMouseDown(e)}))("pointerup",(function(e){return i.ɵɵrestoreView(o),!i.ɵɵreference(11).opened&&t.onMouseUp(e)})),i.ɵɵelementStart(2,"div",2),i.ɵɵtemplate(3,z,2,1,"div",3),i.ɵɵelementEnd(),i.ɵɵnamespaceSVG(),i.ɵɵelementStart(4,"svg",4),i.ɵɵtemplate(5,Q,3,3,"defs",5),i.ɵɵtemplate(6,$,1,6,"line",6),i.ɵɵpipe(7,"async"),i.ɵɵtemplate(8,X,1,4,"circle",7),i.ɵɵpipe(9,"async"),i.ɵɵelementEnd(),i.ɵɵnamespaceHTML(),i.ɵɵelement(10,"app-piece-promotion-modal",null,8),i.ɵɵelementEnd()}2&e&&(i.ɵɵstyleProp("height",t.heightAndWidth,"px")("width",t.heightAndWidth,"px"),i.ɵɵadvance(3),i.ɵɵproperty("ngForOf",t.board.board),i.ɵɵadvance(1),i.ɵɵattribute("height",t.heightAndWidth)("width",t.heightAndWidth),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",i.ɵɵpureFunction0(14,G)),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",i.ɵɵpipeBind1(7,10,t.drawProvider.arrows$)),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",i.ɵɵpipeBind1(9,12,t.drawProvider.circles$)))},directives:[o.NgForOf,O,o.NgIf,t.CdkDrag,o.NgClass,o.NgStyle],pipes:[o.AsyncPipe],styles:['@charset "UTF-8";#board[_ngcontent-%COMP%]{font-family:Courier New,serif;position:relative}.board-row[_ngcontent-%COMP%]{display:block;height:12.5%;position:relative;width:100%}.board-col[_ngcontent-%COMP%]{cursor:default;display:inline-block;height:100%;position:relative;vertical-align:top;width:12.5%}.piece[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;background-size:cover;color:#000!important;cursor:-webkit-grab;cursor:grab;height:100%;justify-content:center;text-align:center;user-select:none;width:100%}.piece[_ngcontent-%COMP%], .piece[_ngcontent-%COMP%]:after{box-sizing:border-box}.piece[_ngcontent-%COMP%]:after{content:"​"}#drag[_ngcontent-%COMP%]{height:100%;width:100%}.possible-point[_ngcontent-%COMP%]{background:radial-gradient(#13262f 15%,transparent 20%)}.possible-capture[_ngcontent-%COMP%]:hover, .possible-point[_ngcontent-%COMP%]:hover{opacity:.4}.possible-capture[_ngcontent-%COMP%]{background:radial-gradient(transparent 0,transparent 80%,#13262f 0);box-sizing:border-box;margin:0;opacity:.5;padding:0}.king-check[_ngcontent-%COMP%]{background:radial-gradient(ellipse at center,red 0,#e70000 25%,rgba(169,0,0,0) 89%,rgba(158,0,0,0) 100%)}.source-move[_ngcontent-%COMP%]{background-color:rgba(146,111,26,.79)!important}.dest-move[_ngcontent-%COMP%]{background-color:#b28e1a!important}.current-selection[_ngcontent-%COMP%]{background-color:#72620b!important}.yCoord[_ngcontent-%COMP%]{right:.2em}.xCoord[_ngcontent-%COMP%], .yCoord[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;box-sizing:border-box;cursor:pointer;font-family:Lucida Console,Courier,monospace;position:absolute;user-select:none}.xCoord[_ngcontent-%COMP%]{bottom:0;left:.2em}.hovering[_ngcontent-%COMP%]{background-color:red!important}.arrow[_ngcontent-%COMP%]{stroke-width:2}svg[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 0 #111) drop-shadow(-1px 1px 0 #111) drop-shadow(1px -1px 0 #111) drop-shadow(-1px -1px 0 #111)}[_nghost-%COMP%]{display:inline-block!important}']});var V=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[_]}},e}();V.ɵmod=i.ɵɵdefineNgModule({type:V}),V.ɵinj=i.ɵɵdefineInjector({factory:function(e){return new(e||V)},imports:[[o.CommonModule,t.DragDropModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&i.ɵɵsetNgModuleScope(V,{declarations:[Y,O],imports:[o.CommonModule,t.DragDropModule],exports:[Y]}),e.HistoryMove=B,e.NgxChessBoardComponent=Y,e.NgxChessBoardModule=V,e.NgxChessBoardService=_,e.PiecePromotionModalComponent=O,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-chess-board.umd.min.js.map