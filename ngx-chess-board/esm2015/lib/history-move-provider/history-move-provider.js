import { BehaviorSubject } from 'rxjs';
export class HistoryMoveProvider {
    constructor() {
        this.historyMovesSubject$ = new BehaviorSubject([]);
    }
    get historyMoves() {
        return this.historyMovesSubject$.value;
    }
    set historyMoves(states) {
        this.historyMovesSubject$.next(states);
    }
    addMove(historyMove) {
        this.historyMoves = [...this.historyMoves, historyMove];
    }
    pop() {
        const lastHistoryMove = this.getLastMove();
        this.historyMoves = this.historyMoves.filter((state) => state !== lastHistoryMove);
        return lastHistoryMove;
    }
    getAll() {
        return this.historyMoves;
    }
    clear() {
        this.historyMoves = [];
    }
    getLastMove() {
        return this.historyMoves[this.getLastMoveIndex()];
    }
    getLastMoveIndex() {
        return this.historyMoves.length - 1;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzdG9yeS1tb3ZlLXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IkM6L1VzZXJzL0tvbXB1dGVyL0Rlc2t0b3AvTm93eSBmb2xkZXIvY2hlc3MtYm9hcmQvcHJvamVjdHMvbmd4LWNoZXNzLWJvYXJkL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9oaXN0b3J5LW1vdmUtcHJvdmlkZXIvaGlzdG9yeS1tb3ZlLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHdkMsTUFBTSxPQUFPLG1CQUFtQjtJQUFoQztRQUNJLHlCQUFvQixHQUFHLElBQUksZUFBZSxDQUFnQixFQUFFLENBQUMsQ0FBQztJQXFDbEUsQ0FBQztJQW5DRyxJQUFJLFlBQVk7UUFDWixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUM7SUFDM0MsQ0FBQztJQUVELElBQUksWUFBWSxDQUFDLE1BQXFCO1FBQ2xDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELE9BQU8sQ0FBQyxXQUF3QjtRQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxHQUFHO1FBQ0MsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQ3hDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssZUFBZSxDQUN2QyxDQUFDO1FBQ0YsT0FBTyxlQUFlLENBQUM7SUFDM0IsQ0FBQztJQUVELE1BQU07UUFDRixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELEtBQUs7UUFDRCxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsV0FBVztRQUNQLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxnQkFBZ0I7UUFDWixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN4QyxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSGlzdG9yeU1vdmUgfSBmcm9tICcuL2hpc3RvcnktbW92ZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9yeU1vdmVQcm92aWRlciB7XHJcbiAgICBoaXN0b3J5TW92ZXNTdWJqZWN0JCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8SGlzdG9yeU1vdmVbXT4oW10pO1xyXG5cclxuICAgIGdldCBoaXN0b3J5TW92ZXMoKTogSGlzdG9yeU1vdmVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeU1vdmVzU3ViamVjdCQudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGhpc3RvcnlNb3ZlcyhzdGF0ZXM6IEhpc3RvcnlNb3ZlW10pIHtcclxuICAgICAgICB0aGlzLmhpc3RvcnlNb3Zlc1N1YmplY3QkLm5leHQoc3RhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRNb3ZlKGhpc3RvcnlNb3ZlOiBIaXN0b3J5TW92ZSkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeU1vdmVzID0gWy4uLnRoaXMuaGlzdG9yeU1vdmVzLCBoaXN0b3J5TW92ZV07XHJcbiAgICB9XHJcblxyXG4gICAgcG9wKCk6IEhpc3RvcnlNb3ZlIHtcclxuICAgICAgICBjb25zdCBsYXN0SGlzdG9yeU1vdmUgPSB0aGlzLmdldExhc3RNb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5TW92ZXMgPSB0aGlzLmhpc3RvcnlNb3Zlcy5maWx0ZXIoXHJcbiAgICAgICAgICAgIChzdGF0ZSkgPT4gc3RhdGUgIT09IGxhc3RIaXN0b3J5TW92ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGxhc3RIaXN0b3J5TW92ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeU1vdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeU1vdmVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFzdE1vdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeU1vdmVzW3RoaXMuZ2V0TGFzdE1vdmVJbmRleCgpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXN0TW92ZUluZGV4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnlNb3Zlcy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==